<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ASG Executive Election 2014 demographics</title>
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
  <style>
    .graph rect {
      fill: #86C5FC;
    }
    .graph text {
      fill: black;
      font: 12px sans-serif;
      text-anchor: middle;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <h2>ASG Executive Election 2014 demographics</h2>
        <p>Based on self-reported data. Compiled by Sheng Wu for Associated Student Government.</p>
      </div>
    </div>
    <table class="table table-hover">
      <thead>
        <tr>
          <th>Demographic</th>
          <th>Julia &amp; Erik</th>
          <th>Alex &amp; Ronak</th>
          <th>Total</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>Total votes</strong></td>
          <td>1489</td>
          <td>269</td>
          <td>1758</td>
        </tr>
        <tr>
          <td><strong>Gender</strong></td>
          <td> <svg class="graph je-gender"></svg></td>
          <td> <svg class="graph ar-gender"></svg></td>
          <td> <svg class="graph total-gender"></svg></td>
        </tr>
        <tr>
          <td><strong>Year</strong></td>
          <td> <svg class="graph je-year"></svg></td>
          <td> <svg class="graph ar-year"></svg></td>
          <td> <svg class="graph total-year"></svg></td>
        </tr>
        <tr>
          <td><strong>School</strong></td>
          <td> <svg class="graph je-school"></svg></td>
          <td> <svg class="graph ar-school"></svg></td>
          <td> <svg class="graph total-school"></svg></td>
        </tr>
        <tr>
          <td><strong>Greek life involvement</strong></td>
          <td> <svg class="graph je-greek"></svg></td>
          <td> <svg class="graph ar-greek"></svg></td>
          <td> <svg class="graph total-greek"></svg></td>
        </tr>
        <tr>
          <td><strong>Housing</strong><br>Off: off-campus<br>Greek: fraternity/sorority<br>
            RH: residence hall<br>RCm: residential community<br>RC: residential college</td>
          <td> <svg class="graph je-housing"></svg></td>
          <td> <svg class="graph ar-housing"></svg></td>
          <td> <svg class="graph total-housing"></svg></td>
        </tr>
      </tbody>
    </table>
  </div>

  <script src="d3.v3.min.js" charset="utf-8"></script>
  <script>
    var data = [
      ['total-gender', [['Male', 680], ['Female', 970], ['Other', 14]]],
      ['je-gender', [['Male', 539], ['Female', 839], ['Other', 10]]],
      ['ar-gender', [['Male', 141], ['Female', 93], ['Other', 4]]],
      ['total-year', [['2018+', 4], ['2017', 434], ['2016', 437], ['2015', 509], ['2014', 289]]],
      ['je-year', [['2018+', 2], ['2017', 379], ['2016', 368], ['2015', 431], ['2014', 250]]],
      ['ar-year', [['2018+', 2], ['2017', 55], ['2016', 69], ['2015', 78], ['2014', 39]]],
      ['total-school', [['Bienen', 39], ['McC', 246], ['Medill', 135], ['SoC', 205], ['SESP', 110], ['WCAS', 718]]],
      ['je-school', [['Bienen', 35], ['McC', 209], ['Medill', 127], ['SoC', 183], ['SESP', 97], ['WCAS', 599]]],
      ['ar-school', [['Bienen', 4], ['McC', 37], ['Medill', 8], ['SoC', 22], ['SESP', 13], ['WCAS', 119]]],
      ['total-greek', [['Yes', 832], ['No', 826]]],
      ['je-greek', [['Yes', 727], ['No', 696]]],
      ['ar-greek', [['Yes', 105], ['No', 130]]],
      ['total-housing', [['Off', 605], ['Greek', 260], ['RH', 310], ['RCm', 171], ['RC', 312]]],
      ['je-housing', [['Off', 514], ['Greek', 228], ['RH', 244], ['RCm', 155], ['RC', 281]]],
      ['ar-housing', [['Off', 91], ['Greek', 32], ['RH', 66], ['RCm', 16], ['RC', 31]]],
    ];

    var draw_bar_graph = function(graph_data) {
      var class_name = graph_data[0];
      var data = graph_data[1];
      var width = 240;
      var height = 120;
      var y = d3.scale.linear()
                .range([height, 0]);
      var chart = d3.select('.' + class_name)
                    .attr("width", width)
                    .attr("height", height);
      y.domain([0, d3.max(data, function(d) { return d[1]; })]);
      var bar_width = width / data.length;
      var bar = chart.selectAll("g")
                     .data(data)
                     .enter().append("g")
                     .attr("transform", function(d, i) { 
                       return "translate(" + i * bar_width + ",0)";
                     });
      bar.append("rect")
         .attr("y", function(d) { return y(d[1]); })
         .attr("height", function(d) { return height - y(d[1]); })
         .attr("width", bar_width - 1);

      bar.append("text")
         .attr("x", bar_width / 2)
         .attr("y", function(d) { return d3.min([y(d[1]) + 3, 92]); })
         .attr("dy", ".75em")
         .text(function(d) { return d[1]; });

     bar.append("text")
         .attr("x", bar_width / 2)
         .attr("y", 115)
         .text(function(d) { return d[0]; });
    };

    data.map(draw_bar_graph);
  </script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-45855343-3', 'northwestern.edu');
    ga('send', 'pageview');
  </script>
</body>
</html>
